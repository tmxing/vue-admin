(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a66bcc1"],{"49fd":function(t,e,r){},"4ee6":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product",staticStyle:{margin:"1em"}},[r("el-button",{staticStyle:{"margin-right":"1em"},attrs:{type:"primary"},on:{click:t.addProductHandler}},[t._v("添加")]),t._v(" "),r("el-button",{staticStyle:{"margin-right":"1em"},attrs:{type:"danger"},on:{click:t.batchDeleteHandler}},[t._v("批量删除")]),t._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.styleSet,"cell-style":t.styleSet,data:t.products.list},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"name",label:"产品名称",width:"180"}}),t._v(" "),r("el-table-column",{attrs:{prop:"price",label:"价格",width:"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"description",label:"描述",width:"300"}}),t._v(" "),r("el-table-column",{attrs:{prop:"category.name",label:"所属栏目",width:"260"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),t.deleteHandler(e.row.id)}}},[t._v("删除")]),t._v(" "),r("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),t.detailHandler(e.row.id)}}},[t._v("详情")]),t._v(" "),r("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),t.editHandler(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.products.total,"current-page":t.products.page+1,"page-size":t.products.pageSize},on:{"current-change":t.changePage}}),t._v(" "),r("el-dialog",{attrs:{title:"修改产品信息",visible:t.product_visible},on:{"update:visible":function(e){t.product_visible=e}}},[r("el-form",{attrs:{model:t.product_form}},[r("el-form-item",{attrs:{label:"产品名称","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.product_form.name,callback:function(e){t.$set(t.product_form,"name",e)},expression:"product_form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"产品价格","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.product_form.price,callback:function(e){t.$set(t.product_form,"price",e)},expression:"product_form.price"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"所属栏目","label-width":t.formLabelWidth}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.product_form.categoryId,callback:function(e){t.$set(t.product_form,"categoryId",e)},expression:"product_form.categoryId"}},t._l(t.categories,(function(t){return r("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),t._v(" "),r("el-form-item",{attrs:{label:"产品状态","label-width":t.formLabelWidth}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.product_form.status,callback:function(e){t.$set(t.product_form,"status",e)},expression:"product_form.status"}},[r("el-option",{attrs:{label:"下架",value:""}}),t._v(" "),r("el-option",{attrs:{label:"上架",value:"正常"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"产品描述","label-width":t.formLabelWidth}},[r("el-input",{attrs:{type:"textarea",rows:3,autocomplete:"off"},model:{value:t.product_form.description,callback:function(e){t.$set(t.product_form,"description",e)},expression:"product_form.description"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"产品图片","label-width":t.formLabelWidth}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://134.175.100.63:5588/file/upload","show-file-list":!1,"on-success":t.successHandler}},[t.imageUrl?r("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.product_visible=!1}}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.saveHandler}},[t._v("确 定")])],1)],1)],1)},o=[],l=(r("5ab2"),r("6d57"),r("e10e"),r("cc57"),r("70ea")),i=r("52c1");function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var n={data:function(){return{params:{page:0,pageSize:10},imageUrl:"",formLabelWidth:"120px",product_visible:!1,product_form:{},batchIds:[]}},watch:{params:{handler:function(){this.findAllProduct(this.params)},deep:!0}},computed:s({},Object(i["d"])("product",["products","categories"])),created:function(){this.findAllProduct(this.params),this.findAllCategory()},methods:s(s({},Object(i["b"])("product",["findAllProduct","saveOrUpdate","findAllCategory","deleteBatchProducts","commitCategoryName","deleteProductsById"])),{},{detailHandler:function(t){this.$router.push({path:"/product/detail",query:{productId:t}})},deleteHandler:function(t){var e=this;this.deleteProductsById(t).then((function(){e.$message({message:"删除成功",type:"success"}),e.findAllProduct(e.params)}))},batchDeleteHandler:function(){var t=this;this.deleteBatchProducts(this.batchIds).then((function(){t.$message({message:"删除成功",type:"success"}),t.findAllProduct(t.params)}))},handleSelectionChange:function(t){this.batchIds=t.map((function(t){return t.id}))},addProductHandler:function(){this.product_form={},this.imageUrl="",this.product_visible=!0},editHandler:function(t){this.product_visible=!0,this.product_form=t,this.product_form.id=t.id,this.product_form.name=t.name,this.product_form.price=t.price,this.product_form.description=t.description,this.product_form=Object.assign({},this.product_form),this.imageUrl=t.photo},successHandler:function(t){this.imageUrl="http://134.175.100.63:8686/group1/"+t.data.id,this.product_form.photo="http://134.175.100.63:8686/group1/"+t.data.id,this.product_form=Object.assign({},this.product_form)},saveHandler:function(){var t=this;this.saveOrUpdate(this.product_form).then((function(e){t.$message({message:t.product_form.id?"编辑成功":"新增成功",type:"success"}),t.findAllProduct(t.params)})),this.product_visible=!1},reset:function(){this.params={page:0,pageSize:10},this.findAllProduct(this.params)},changePage:function(t){this.params.page=t-1},styleSet:function(){return"text-align:center;"}})},d=n,u=(r("93b9d"),r("4023")),p=Object(u["a"])(d,a,o,!1,null,"c23a0004",null);e["default"]=p.exports},"93b9d":function(t,e,r){"use strict";var a=r("49fd"),o=r.n(a);o.a}}]);